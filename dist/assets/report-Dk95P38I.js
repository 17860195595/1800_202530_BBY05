import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css             */import"./components-9bzrBSqj.js";import{e as l,d as n,h as g,f as p,c as f,s as h}from"./firebaseConfig-D6gRsOSx.js";import{onAuthReady as y}from"./authentication-BuFsRrDW.js";import{a as r,b as w}from"./notifications-DXz7xSIH.js";import"./vendor-DQ-sQAqT.js";function D(t){const e=window.location.pathname;return e.includes("/pages/")?`./${t}`:e.endsWith("/index.html")||e==="/"||e.endsWith("index.html")?`./src/pages/${t}`:`./src/pages/${t}`}function v(){return D("main.html")}y(t=>{if(!t){r("You must be logged in to submit a report.");return}document.getElementById("reportForm").addEventListener("submit",async e=>{e.preventDefault();const a=l(n,"users",t.uid),s=(await g(a)).data().username||t.email||t.uid,c=document.getElementById("type").value,i=document.getElementById("comment").value;navigator.geolocation.getCurrentPosition(async o=>{const d=o.coords.latitude,m=o.coords.longitude;try{await p(f(n,"trafficReports"),{username:s,type:c,comment:i,lat:d,lng:m,createAt:h()}),w("Report sent successfully!"),e.target.reset(),setTimeout(()=>{window.location.href=v()},1e3)}catch(u){console.error("Error adding document: ",u),r("Failed to send report.")}},o=>{console.error("Error getting location: ",o),r("Failed to get your location. Please enable location services.")})})});

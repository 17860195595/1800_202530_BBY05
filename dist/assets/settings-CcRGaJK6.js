import"./modulepreload-polyfill-B5Qt9EMX.js";import{e as l,d,h as E,a as w,r as D,i as v,u as L,j as C,k as u,f as R,c as y,g as x}from"./firebaseConfig-DA3vMik7.js";import{o as I}from"./vendor-DAUOFwH1.js";import"./components-YsRQu0Q4.js";document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("pfp-image"),t=document.getElementById("upload-pfp"),c=document.getElementById("reset-pfp");let a=null;I(w,async r=>{if(!r)return;a=r;const o=l(d,"pfp",r.uid);try{const n=await E(o);n.exists()&&n.data().image&&(e.src=n.data().image)}catch(n){console.error("Error loading profile picture:",n)}}),e.addEventListener("click",()=>t.click()),t.addEventListener("change",async r=>{const o=r.target.files[0];if(!o||!a)return;const n=new FileReader;n.onload=s=>{e.src=s.target.result},n.readAsDataURL(o);try{const s=D(v,`profilePictures/${a.uid}`);await L(s,o);const p=await C(s),h=l(d,"pfp",a.uid);await u(h,{image:p},{merge:!0}),e.src=p+"?t="+new Date().getTime()}catch(s){console.error("Error uploading profile picture:",s)}}),c.addEventListener("click",async()=>{const r="/src/assets/images/pfp-paceholder.jpg";if(e.src=r,!a)return;const o=l(d,"pfp",a.uid);await u(o,{image:null},{merge:!0})})});const i=document.getElementById("myForm");i.addEventListener("submit",async e=>{e.preventDefault();const t=i.name.value,c=i.lastname.value,a=i.username.value;try{await R(y(d,"userz"),{name:t,lastname:c,username:a,createdAt:new Date}),alert("8saved to firestore8"),i.reset()}catch(r){console.error(r),alert("8error saving creds to firestore8")}});const m=document.querySelector(".show-cred-container p:nth-of-type(1)"),f=document.querySelector(".show-cred-container p:nth-of-type(2)"),g=document.querySelector(".show-cred-container p:nth-of-type(3)");async function B(){try{const e=await x(y(d,"userz"));let t=null;e.forEach(c=>{t=c.data()}),t?(m.textContent=t.name,f.textContent=t.lastname,g.textContent=t.username):(m.textContent="No user found",f.textContent="-",g.textContent="-")}catch(e){console.error("Error getting user info:",e)}}B();

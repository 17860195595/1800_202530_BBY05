import"./modulepreload-polyfill-B5Qt9EMX.js";import"./components-9bzrBSqj.js";import{i as w,j as m,e as c,h as y,a as D,d as l,u as E,k as S}from"./firebaseConfig-D6gRsOSx.js";import{g as x,o as v,u as C}from"./vendor-DQ-sQAqT.js";document.addEventListener("DOMContentLoaded",()=>{const n=x(),r=w();//!!!!!!!!!!!wont use storage instance since i am gonna do base 64 string to store imgs!!!!!
const t=document.getElementById("pfpImage"),s=document.getElementById("reset-pfp"),a=document.getElementById("upload-pfp");t.addEventListener("click",()=>{console.log("clicked image"),a.click()}),a.addEventListener("change",async()=>{const e=a.files[0];if(!e)return alert("No file selected");const o=n.currentUser;if(!o)return alert("u need to log in");const u=new FileReader;u.onload=async d=>{const h=d.target.result;await m(c(r,"users",o.uid),{pfp:h},{merge:!0}),t.src=h},u.readAsDataURL(e)}),v(n,async e=>{if(!e)return alert("u need to log in");const o=c(r,"users",e.uid),u=await y(o);if(u.exists()){const d=u.data();d.pfp?t.src=d.pfp:t.src="/src/assets/images/pfp-paceholder.jpg"}}),s.addEventListener("click",async()=>{const e=n.currentUser;if(!e)return alert("u need to log in");const o="/src/assets/images/pfp-paceholder.jpg";t.src=o,await m(c(r,"users",e.uid),{pfp:null},{merge:!0})})});const p=document.querySelector(".show-cred-container div:nth-of-type(2) > p"),f=document.querySelector(".show-cred-container div:nth-of-type(3) > p"),g=document.querySelector(".show-cred-container div:nth-of-type(4) > p"),i=document.getElementById("myForm");i.addEventListener("submit",async n=>{n.preventDefault(),console.log("eventVariable",n);const r=i.name.value,t=i.lastname.value,s=i.username.value,a=D.currentUser;if(!a){alert("you need to be logged in");return}try{await m(c(l,"users",a.uid),{name:r,lastname:t,username:s,createdAt:new Date},{merge:!0}),p&&(p.textContent=r||""),f&&(f.textContent=t||""),g&&(g.textContent=s||"");const e=c(l,"users",a.uid);(await y(e)).data().username&&(await E(c(l,"users",a.uid),{displayName:S()}),await C(a,{displayName:null})),alert("saved to firestore"),i.reset()}catch(e){console.error(e),alert("error saving creds to firestore")}});v(D,async n=>{if(!n){console.log("needa log in first");return}const r=c(l,"users",n.uid),t=await y(r);if(t.exists()){const s=t.data(),e=n.displayName||""||s.username||s.name||"";p.textContent=s.name,f.textContent=s.lastname,g.textContent=s.username||e}else console.log("missing document")});
